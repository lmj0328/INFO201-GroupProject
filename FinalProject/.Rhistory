group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
wa <- sf::st_read(system.file("shape/wa.shp", pckage = sf), quiet=TRUE)
library(ggplot2)
library(sf)
wa <- sf::st_read(system.file("shape/wa.shp", pckage = sf), quiet=TRUE)
wa <- sf::st_read(system.file("shape/wa.shp", package = sf), quiet=TRUE)
wa <- sf::st_read(system.file("shape/wa.shp", package = "sf"), quiet=TRUE)
p
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'none'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'none') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
class(wa_poverty_final_data$county_name)
class(wa_poverty_final_data$Percent)
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = as.character(~Percent), colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'none') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = Percent), colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'none') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
ggplot(filteredPOVData, aes(long, lat, group = group, fill = Percent)) +
geom_polygon(color = "#ffffff", size = 0.05) +
coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
labs(fill = "% Below Poverty Line") +
scale_fill_gradientn(colours = terrain.colors(7))
runApp('FinalProject')
p_wa <- map_data("county") %>%
filter(region == 'washington') %>%
group_by(group) %>%
plot_ly(
x = ~long,
y = ~lat,
fillcolor = 'white',
hoverinfo = "none") %>%
add_polygons(
line = list(color = 'black', width = 0.5)) %>%
layout(
xaxis = blank_layer,
yaxis = blank_layer)
blank_layer <- list(
title = "",
showgrid = F,
showticklabels = F,
zeroline = F)
p_wa <- map_data("county") %>%
filter(region == 'washington') %>%
group_by(group) %>%
plot_ly(
x = ~long,
y = ~lat,
fillcolor = 'white',
hoverinfo = "none") %>%
add_polygons(
line = list(color = 'black', width = 0.5)) %>%
layout(
xaxis = blank_layer,
yaxis = blank_layer)
p_wa
p_wa <- map_data("county") %>%
filter(region == 'washington') %>%
group_by(group) %>%
plot_ly(
x = ~long,
y = ~lat,
fillcolor = 'white',
hoverinfo = "subregion") %>%
add_polygons(
line = list(color = 'black', width = 0.5)) %>%
layout(
xaxis = blank_layer,
yaxis = blank_layer)
p_wa
library(tidyverse)
df <- read.csv("https://raw.githubusercontent.com/bcdunbar/datasets/master/californiaPopulation.csv")
colnames(df)
blank_layer <- list(
title = "",
showgrid = F,
showticklabels = F,
zeroline = F)
p_wa <- map_data("county") %>%
filter(region == 'washington') %>%
group_by(group) %>%
plot_ly(
x = ~long,
y = ~lat,
fillcolor = 'white',
hoverinfo = "none") %>%
add_polygons(
line = list(color = 'black', width = 0.5)) %>%
layout(
xaxis = blank_layer,
yaxis = blank_layer)
p_wa
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2011_us_ag_exports.csv")
df$hover <- with(df, paste(state, '<br>', "Beef", beef, "Dairy", dairy, "<br>",
"Fruits", total.fruits, "Veggies", total.veggies,
"<br>", "Wheat", wheat, "Corn", corn))
# give state boundaries a white border
l <- list(color = toRGB("white"), width = 2)
# specify some map projection/options
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showlakes = TRUE,
lakecolor = toRGB('white')
)
p_wash <- plot_geo(df, locationmode = 'USA-states') %>%
add_trace(
z = ~total.exports, text = ~hover, locations = ~code,
color = ~total.exports, colors = 'Purples'
) %>%
colorbar(title = "Millions USD") %>%
layout(
title = '2011 US Agriculture Exports by State<br>(Hover for breakdown)',
geo = g
)
p_wash
class(df)
colnames(df)
newMapData <- wa_county_data %>% left_join(counties, by = "county_fips")
colnames(counties)
colnames(wa_county_data)
getwd()
wa_pov_data <- read.csv("Data/PovertyData/wa_poverty_data")
wa_pov_data <- read.csv("Data/PovertyData/wa_poverty_data.csv")
colnames(wa_pov_data)
wa_poverty_2012 <- read.csv("wa_poverty_2012.csv", stringsAsFactors = FALSE)
colnames(wa_poverty_2012)
setwd(../../..)
setwd("../..")
getwd()
setwd("..")
setwd("info201_assignments/final project/poverty")
wa_poverty_2012 <- read.csv("wa_poverty_2012.csv", stringsAsFactors = FALSE)
wa_poverty_2012 <- read.csv("wa-poverty-12.csv", stringsAsFactors = FALSE)
wa_poverty_2012 <- read.csv("washington-poverty-12.csv", stringsAsFactors = FALSE)
wa_poverty_2012 <- read.csv("wsahington-poverty-12.csv", stringsAsFactors = FALSE)
colnames(wa_poverty_2012)
wa_poverty_2012 <- wa_poverty_2012 %>% select("GEO.display.label", "GCT_STUB.target.geo.id", "GCT_STUB.display.label", "HC01", "X"
)
colnames(wa_poverty_2012)
head(wa_poverty_2012)
wa_poverty_2012 <- wa_poverty_2012 %>% filter(X == "2012")
head(wa_poverty_2012)
wa_poverty_2012 <- wa_poverty_2012 %>% select("GEO.display.label", "GCT_STUB.target.geo.id", "GCT_STUB.display.label1", "HC01", "X")
wa_poverty_2012 <- wa_poverty_2012 %>% select("GEO.display.label", "GCT_STUB.target.geo.id", "GCT_STUB.display.label.1", "HC01", "X")
wa_poverty_2012 <- read.csv("wsahington-poverty-12.csv", stringsAsFactors = FALSE)
wa_poverty_2012 <- wa_poverty_2012 %>% select("GEO.display.label", "GCT_STUB.target.geo.id", "GCT_STUB.display.label.1", "HC01", "X")
wa_poverty_2012 <- wa_poverty_2012 %>% filter(X == "2012")
head(wa_poverty_2012)
wa_poverty_2012 <- read.csv("wsahington-poverty-12.csv", stringsAsFactors = FALSE)
wa_poverty_2012 <- wa_poverty_2012 %>% select("GEO.display.label", "GCT_STUB.target.geo.id2", "GCT_STUB.display.label.1", "HC01", "X")
head(wa_poverty_2012)
getwd()
wa_county_fips <- wa_poverty_2012
getwd()
wa_poverty_data <- read.csv("../wa_poverty_data.csv")
colnames(wa_poverty_data)
head(wa_poverty_data)
wa_poverty_data <- read.csv("../wa_poverty_data.csv", stringAsFactors=FALSE)
wa_poverty_data <- read.csv("../wa_poverty_data.csv")
wa_poverty_data <- select(county_name, Percent, Year)
wa_poverty_data <- wa_poverty_data %>% select("county_name", "Percent", "Year")
wa_pov_fips_data <- left_join(wa_poverty_2012, wa_county_fips, by="county_name")
wa_pov_fips_data <- left_join(wa_poverty_data, wa_county_fips, by="county_name")
colnames(wa_county_
)
colnames(wa_county_data)
colnames(wa_poverty_data)
colnames(wa_county_fips)
head(wa_county_fips)
wa_county_fips <- wa_county_fips %>% filter(X = "2012")
wa_county_fips <- wa_county_fips %>% filter(X == "2012")
head(wa_county_fips)
wa_county_fips <- wa_county_fips %>% filter(GTC_STUB.display.label.1 != "Washington")
wa_county_fips <- wa_county_fips %>% filter(GCT_STUB.display.label.1 != "Washington")
head(wa_county_fips)
colnames(wa_county_fips) <- c("state", "fips", "county", "percent", "year")
head(wa_county_fips)
colnames(wa_county_fips) <- c("state", "fips", "county_name", "percent", "year")
wa_pov_fips_data <- left_join(wa_poverty_data, wa_county_fips, by="county_name")
colnames(wa_pov_fips_data)
colnames(wa_county_fips)
colnames(wa_county_fips)
## medium.com
countydata %>%
left_join(counties, by = "county_fips") %>%
filter(state_name =="California") %>%
ggplot(mapping = aes(long, lat, group = group, fill = horate)) +
geom_polygon(color = "#ffffff", size = .25) +
scale_fill_gradientn(labels = scales::percent,
guide = guide_colorbar(title.position = "top")) +
coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
theme(legend.title = element_text(),
legend.key.width = unit(.5, "in")) +
labs(fill = "Homeownership rate") +
theme_urban_map()
p_wash <- plot_geo(df, locationmode = 'USA-states') %>%
add_trace(
z = ~total.exports, text = ~hover, locations = ~code,
color = ~total.exports, colors = 'Purples'
) %>%
colorbar(title = "Millions USD") %>%
layout(
title = '2011 US Agriculture Exports by State<br>(Hover for breakdown)',
geo = g
)
wa_county_fips <- wa_county_fips
p_wash
p_wa <- map_data("county") %>%
filter(region == 'washington') %>%
group_by(group) %>%
plot_ly(
x = ~long,
y = ~lat,
fillcolor = 'white',
hoverinfo = "none") %>%
add_polygons(
line = list(color = 'black', width = 0.5)) %>%
layout(
xaxis = blank_layer,
yaxis = blank_layer)
p_wa
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~county_name, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend = TRUE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
colnames(wa_poverty_final_data)
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~Percent, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend =  FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
class(wa_poverty_final_data$Percent)
class(wa_poverty_final_data$county_name)
wa_poverty_final_data$Percent_cat <- cut(wa_poverty_final_data$Percent,
breaks = c(seq(0, 30, by = 5)), labels=1:6)
wa_poverty_final_data
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~Percent, colors = c('#ffeda0','#f03b20'),
text = as.character(~Percent), hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend =  FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~Percent, colors = c('#ffeda0','#f03b20'),
text = Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend =  FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
source('~/UW Fall 2018/Info 201/R Projects/map_test.R', echo=TRUE)
p <- wa_poverty_final_data %>% filter(Year == '2012') %>%
group_by(group) %>%
plot_ly(x = ~long, y = ~lat, color = ~Percent, colors = c('#ffeda0','#f03b20'),
text = ~Percent, hoverinfo = 'text') %>%
add_polygons(line = list(width = 0.4)) %>%
add_polygons(
fillcolor = 'transparent',
line = list(color = 'black', width = 0.5),
showlegend =  FALSE, text = ~Percent, hoverinfo = 'text'
) %>%
layout(
title = "California Population by County",
titlefont = list(size = 10),
xaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE),
yaxis = list(title = "", showgrid = FALSE,
zeroline = FALSE, showticklabels = FALSE)
)
p
getwd()
ggplot(filteredPOVData, aes(long, lat, group = group, fill = Percent)) +
geom_polygon(color = "#ffffff", size = 0.05) +
coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
labs(fill = "% Below Poverty Line") +
scale_fill_gradientn(colours = terrain.colors(7))
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
county_data %>% ggplot(aes(long, lat, group = group, fill = medhhincome)) + geom_polygon(color = NA) +
coord_map(projection = "albers", lat0 = 39, lat1 = 45) +  labs(fill = "Median Household Income")
county_data <- left_join(countydata, counties, by="county_fips")
head(county_data)
county_data <- county_data %>% filter(state_abbv == "WA")
county_data %>% ggplot(aes(long, lat, group = group, fill = medhhincome)) + geom_polygon(color = NA) +
coord_map(projection = "albers", lat0 = 39, lat1 = 45) +  labs(fill = "Median Household Income")
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
filteredPOVData <- wa_poverty_final_data %>%
filter(Year == input$selectPovYear)
runApp('~/UW Fall 2018/Info 201/INFO201-GroupProject/FinalProject')
